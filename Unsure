$real_secret =6aee54b96f7a4427a3a122098726808b 'ZzsMLGKe162CfA5EcG6j'; $invoice_id = $_GET['invoice_id']; //invoice_id is passed back to the callback URL $transaction_hash = $_GET['transaction_hash']; $value_in_satoshi = $_GET['value']; $value_in_btc = $value_in_satoshi / 100000000; //Commented out to test, uncomment when live if ($_GET['test'] == true) { return; } try { //create or open the database $database = new SQLiteDatabase('db.sqlite', 0666, $error); } catch(Exception $e) { die($error); } //Add the invoice to the database $stmt = $db->prepare("replace INTO invoice_payments (invoice_id, transaction_hash, value) values(?, ?, ?)"); $stmt->bind_param("isd", $invoice_id, $transaction_hash, $value_in_btc); if($stmt->execute()) { echo "*ok*"; }
